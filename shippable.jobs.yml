jobs:
  - name: manifest1
    type: manifest
    steps:
      - IN: nginx-image
      - IN: trigger1
      # - IN: replicas1
      # - IN: dockerOptions1
      - TASK: managed

  - name: manifest2
    type: manifest
    steps:
      # - IN: params2
      # - IN: manifest1
      # - IN: replicas2
      - IN: busybox-image
      - IN: trigger2
      - TASK: managed      

  # - name: samplePythonJob
  #   type: runCI
  #   steps:
  #     - IN: samplePython
  #     - IN: triggerSamplePythonCI

  - name: gkeDeploy
    type: gkeDeploy
    steps:
      - IN: gkeCluster
      - IN: manifest1
      # - IN: manifest2
      # - IN: params1
      #   applyTo: 
      #     - nginx-image
      # - IN: params2
      #   applyTo: 
      #     - manifest2
      # - IN: params3
      # - IN: badDockerOptions
      - IN: triggerGKE
      - IN: replicas1
      - TASK: managed
        deployMethod: upgrade
        
  - name: gkeDeploy2
    type: deploy
    steps:
      - IN: gkeCluster
      - IN: manifest2
      # - IN: manifest2
      # - IN: params1
      #   applyTo: 
      #     - nginx-image
      # - IN: params2
      #   applyTo: 
      #     - manifest2
      # - IN: params3
      - IN: triggerGKE2
      - IN: replicas4
      - IN: badDockerOptions
      - TASK: managed
        deployMethod: upgrade        

  - name: ecsDeploy
    type: deploy
    steps:
      - IN: manifest1
      # - IN: manifest2
      # - IN: release1
      - IN: ecsCluster
      - IN: triggerECS
      - IN: replicas2
      #   applyTo: 
      #     - manifest1
      #     - manifest2
      # - IN: params1
      #   applyTo:
      #     - nginx-image
      # - IN: dockerOptions2
      # - OUT: nginx-image
      - TASK: managed
        deployMethod: upgrade
  
  # - name: tripubDeploy
  #   type: tripubDeploy
  #   steps:
  #     - IN: manifest2
  #     - IN: ecsCluster
  #     - IN: triggerTripub
  #     - TASK: managed
      
  - name: ecs-service2
    type: ecsDeploy
    steps:
  #     - IN: ecs-service1
      - IN: manifest2
      - IN: ecsCluster
      - IN: replicas3
      - IN: triggerECS2
      # - IN: params3
      # - IN: dockerOptions3
      - TASK: managed
        deployMethod: upgrade
      
  # - name: dcl-service1
  #   type: dclDeploy
  #   steps:
  #     - IN: manifest2
  #     - IN: dclCluster
  #     - TASK: managed
      
  # - name: dcl-service2
  #   type: dclDeploy
  #   steps:
  #     - IN: dcl-service1
  #     - IN: dclCluster
  #     - TASK: managed
      
  # - name: run-sample_python
  #   type: runCI
  #   steps:
  #     - IN: samplePython
  #     # - OUT: nginx-image
  #     - IN: triggerSamplePythonCI
  #     - TASK: managed
  
  - name: release1
    type: release
    steps:
      - IN: version3
      - IN: manifest1
      - IN: triggerRelease1
      - TASK: managed
        # bump: major

  # - name: release3
  #   type: release
  #   steps:
  #     - IN: version3
  #     - TASK: managed

  # - name: sh-sample-python
  #   type: runSh
  #   steps:
  #     IN: samplePython
  #     TASK: managed
  #       script: ls
